/*! For license information please see landing.js.LICENSE.txt */
"use strict";(wx.webpackJsonp=wx.webpackJsonp||[]).push([["pages/landing/landing"],{"./src/api/qrcode.ts":function(e,n,t){t.d(n,{getQrcodeParams:function(){return getQrcodeParams}});var s=t("./src/utils/http/index.ts"),a=function(e){return e.qrcode="/api/tpms/wx_qrcode",e.wxQrcode="/api/tpms/wx_qrcode",e}(a||{});function getQrcodeParams(e,n){return(0,s.get)({url:"".concat(a.qrcode,"/").concat(e,"?scene=").concat(n)})}},"./node_modules/@tarojs/taro-loader/lib/raw.js!./src/pages/landing/landing.vue":function(e,n,t){var s=t("./src/pages/landing/landing.vue?vue&type=template&id=08c43c6a&ts=true"),a=t("./src/pages/landing/landing.vue?vue&type=script&setup=true&lang=ts"),r=t("./src/pages/landing/landing.vue?vue&type=style&index=0&id=08c43c6a&lang=scss&module=true"),o=t("./node_modules/vue-loader/dist/exportHelper.js");const u={};u.$style=r.default;const d=(0,o.default)(a.default,[["render",s.render],["__cssModules",u],["__file","src/pages/landing/landing.vue"]]);n.default=d},"./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/babel-loader/lib/index.js??clonedRuleSet-21.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/pages/landing/landing.vue?vue&type=script&setup=true&lang=ts":function(e,n,t){var s=t("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),a=t("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),r=t("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),o=t("./node_modules/vue/index.js"),u=t("./src/api/qrcode.ts"),d=t("./src/stores/index.ts"),l=t("./src/utils/index.ts"),c=t("./src/utils/track/index.ts"),i=t("./node_modules/@tarojs/taro/index.js"),p=t.n(i),g=["page"];n.default=(0,o.defineComponent)({__name:"landing",setup:function setup(e,n){var t;(0,n.expose)();var m=(0,o.ref)(!0),v=(0,o.ref)(!1),f=(0,o.ref)(!1),_=(0,o.ref)(""),j=(0,d.useUserStore)(),b=function(){var e=(0,r.default)((0,a.default)().mark((function _callee(e,n){var t,s;return(0,a.default)().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,u.getQrcodeParams)(e,n);case 2:return t=a.sent,(s=t||{}).page&&!s.page.startsWith("/")&&(s.page="/".concat(s.page)),a.abrupt("return",s);case 6:case"end":return a.stop()}}),_callee)})));return function queryQrcodeParams(n,t){return e.apply(this,arguments)}}(),x=function(){var e=(0,r.default)((0,a.default)().mark((function _callee2(e){var n,t,s,r,o;return(0,a.default)().wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:if(n="",e.q&&e.q.startsWith("http")&&(t=decodeURIComponent(e.q),s=t.split("/"),n=s[s.length-1]),!n&&e.scene&&(n=e.scene),!n){a.next=15;break}return a.prev=4,r=p().getLaunchOptionsSync(),a.next=8,b(n,r.scene);case 8:return o=a.sent,a.abrupt("return",Object.assign({},e,o));case 12:a.prev=12,a.t0=a.catch(4),console.error("获取二维码参数失败",a.t0);case 15:return a.abrupt("return",e);case 16:case"end":return a.stop()}}),_callee2,null,[[4,12]])})));return function parseQueryParams(n){return e.apply(this,arguments)}}();(0,o.onMounted)((0,r.default)((0,a.default)().mark((function _callee3(){var e,n,t,r,o;return(0,a.default)().wrap((function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:return v.value=!1,e=(0,i.useRouter)(),a.next=4,j.login(e.params.uid);case 4:return w(),a.next=7,x(e.params);case 7:n=a.sent,console.debug("landing query",n),c.EventDefaultProperties.$source=n.$source,(0,c.tarckEvents)([{path:e.path,event:c.IEventsName.PG}]),(0,d.useAppStore)().getSharePosterData().catch((function(e){return console.error("getSharePosterData error=",e)})),(0,d.useBannerStore)().loadHomeBanners().catch((function(){return 0})),(0,d.useCatalogStore)().load().catch((function(){return 0})),(0,d.usePointStore)().load(),(0,d.useMissionsStore)().load(),t="/pages/index/index",r=n.page,o=(0,s.default)(n,g),r&&((t=decodeURIComponent(r)).startsWith("/")||(t="/".concat(t))),t+="?".concat(Object.keys(o).map((function(e){return"".concat(e,"=").concat(decodeURIComponent(o[e]))})).join("&")),n.uid&&j.trace({introducer:n.uid}),_.value=t,v.value=!0,h(),check();case 25:case"end":return a.stop()}}),_callee3)})))),(0,o.onUnmounted)((function(){clearInterval(t)}));function check(){v.value&&f.value&&(console.debug("reLaunch to %s",_.value),p().reLaunch({url:_.value}))}var h=function(){var e=(0,r.default)((0,a.default)().mark((function _callee4(){var e,n,t;return(0,a.default)().wrap((function _callee4$(s){for(;;)switch(s.prev=s.next){case 0:return e=(0,l.loadCdnFontFace)((0,l.cdnurl)("static/CentraleSans.otf"),"CentraleSans"),n=(0,l.loadCdnFontFace)((0,l.cdnurl)("static/CentraleSans-Medium.otf"),"CentraleSans-medium"),t=new Promise((function(e){p().loadFontFace({global:!0,source:'url("'.concat((0,l.cdnurl)("static/FZLanTingHei-R-GBK.TTF"),'")'),scopes:["webview","native"],family:"FZLanTingHei-R-GBK",complete:function complete(n){console.debug("loadFontFace FZLanTingHei-R-GBK result=",n),e(n)}})})),s.next=5,Promise.allSettled([e,n,t]);case 5:case"end":return s.stop()}}),_callee4)})));return function loadFontFace(){return e.apply(this,arguments)}}(),w=function onIdentities(){if(j.userInfo){var e=j.userInfo,n=(e.openid,e.unionid,e.sid,[]);n.push({type:"wxa.openId",id:"ugrowtest1"},{type:"wechat.unionId",id:"ugrowtest1"},{type:"encodeMiniUserId",id:"ugrowtest1"});var t=p().getApp()["".concat("zippo")];console.debug("linkflow sdk",t,n),n.length&&t.setIdentities(n)}},y={get enterTimer(){return t},set enterTimer(e){t=e},showLoading:m,loaded:v,loadingAnimated:f,enterUrl:_,userStore:j,queryQrcodeParams:b,parseQueryParams:x,handleEnter:function handleEnter(){clearInterval(t);var e=Date.now();t=setInterval((function(){Date.now()-e>=5e3&&(clearInterval(t),f.value=!0,check())}),100)},check:check,loadFontFace:h,onIdentities:w};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}})},"./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/babel-loader/lib/index.js??clonedRuleSet-21.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/pages/landing/landing.vue?vue&type=template&id=08c43c6a&ts=true":function(e,n,t){t.d(n,{render:function(){return render}});var s=t("./src/components/Loading/Loading.vue"),a=t("./node_modules/vue/index.js"),r={class:"container"};function render(e,n,t,o,u,d){var l=s.default;return(0,a.openBlock)(),(0,a.createElementBlock)("view",r,[(0,a.createElementVNode)("view",{class:(0,a.normalizeClass)(e.$style.main)},[(0,a.createVNode)(l,{show:o.showLoading,onLoaded:o.handleEnter},null,8,["show"])],2)])}},"./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/@tarojs/webpack5-runner/node_modules/css-loader/dist/cjs.js??clonedRuleSet-7.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-7.use[2]!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-7.use[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/pages/landing/landing.vue?vue&type=style&index=0&id=08c43c6a&lang=scss&module=true":function(e,n){n.default={main:"landing__main___U3HXo",loading:"landing__loading___j2RBj",bg:"landing__bg___qjKEj","slide-bottom":"landing__slide-bottom___JXD2Y"}},"./src/pages/landing/landing.vue":function(e,n,t){var s=t("./node_modules/@tarojs/runtime/dist/runtime.esm.js"),a=t("./node_modules/@tarojs/taro-loader/lib/raw.js!./src/pages/landing/landing.vue");Page((0,s.createPageConfig)(a.default,"pages/landing/landing",{root:{cn:[]}},{}||{})),a.default},"./src/pages/landing/landing.vue?vue&type=script&setup=true&lang=ts":function(e,n,t){t.d(n,{default:function(){return s.default}});var s=t("./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/babel-loader/lib/index.js??clonedRuleSet-21.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/pages/landing/landing.vue?vue&type=script&setup=true&lang=ts")},"./src/pages/landing/landing.vue?vue&type=template&id=08c43c6a&ts=true":function(e,n,t){t.d(n,{render:function(){return s.render}});var s=t("./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/babel-loader/lib/index.js??clonedRuleSet-21.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/pages/landing/landing.vue?vue&type=template&id=08c43c6a&ts=true")},"./src/pages/landing/landing.vue?vue&type=style&index=0&id=08c43c6a&lang=scss&module=true":function(e,n,t){t.d(n,{default:function(){return s.default}});var s=t("./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/@tarojs/webpack5-runner/node_modules/css-loader/dist/cjs.js??clonedRuleSet-7.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-7.use[2]!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-7.use[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/pages/landing/landing.vue?vue&type=style&index=0&id=08c43c6a&lang=scss&module=true")}},function(e){e.O(0,["taro","vendors","common"],(function(){return n="./src/pages/landing/landing.vue",e(e.s=n);var n}));e.O()}]);