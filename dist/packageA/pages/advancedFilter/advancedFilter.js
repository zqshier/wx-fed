"use strict";require("../../sub-vendors.js");/*! For license information please see advancedFilter.js.LICENSE.txt */
(wx.webpackJsonp=wx.webpackJsonp||[]).push([["packageA/pages/advancedFilter/advancedFilter"],{"./node_modules/@tarojs/taro-loader/lib/raw.js!./src/packageA/pages/advancedFilter/advancedFilter.vue":function(e,t,a){var n=a("./src/packageA/pages/advancedFilter/advancedFilter.vue?vue&type=template&id=0f4b7aa9&ts=true"),l=a("./src/packageA/pages/advancedFilter/advancedFilter.vue?vue&type=script&setup=true&lang=ts"),s=a("./src/packageA/pages/advancedFilter/advancedFilter.vue?vue&type=style&index=0&id=0f4b7aa9&lang=scss&module=true"),r=a("./node_modules/vue-loader/dist/exportHelper.js");const o={};o.$style=s.default;const d=(0,r.default)(l.default,[["render",n.render],["__cssModules",o],["__file","src/packageA/pages/advancedFilter/advancedFilter.vue"]]);t.default=d},"./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/babel-loader/lib/index.js??clonedRuleSet-21.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/packageA/pages/advancedFilter/advancedFilter.vue?vue&type=script&setup=true&lang=ts":function(e,t,a){var n=a("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),l=a("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),s=a("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),r=a("./node_modules/vue/index.js"),o=a("./src/utils/index.ts"),d=a("./src/utils/track/index.ts"),c=a("./node_modules/@tarojs/taro/index.js"),u=a.n(c);t.default=(0,r.defineComponent)({__name:"advancedFilter",setup:function setup(e,t){(0,t.expose)();var a,i,p=(0,c.getApp)()["".concat("zippo")],m=(0,c.useRouter)(),_=(0,r.ref)(m.params.sonId||0),v=(0,r.ref)([]),g=["¥0-299","¥300-599","¥600-899","¥900-1199","¥1200-1499","¥1500-2999","¥3000-4999","¥5000+"],f={"¥0-299":[0,299],"¥300-599":[300,599],"¥600-899":[600,1199],"¥900-1199":[900,1199],"¥1200-1499":[1200,1499],"¥1500-2999":[1500,2999],"¥3000-4999":[3e3,4999],"¥5000+":[5e3]},y=function getMinMaxPriceFromSelection(e){return e.map((function(e){return f[e]}))},b=function(){var e=(0,s.default)((0,l.default)().mark((function _callee(){var e;return(0,l.default)().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:e={properties:[],priceRange:[],selectNum:0},v.value.forEach((function(t){if(t.selectedValues.length)if(e.selectNum+=t.selectedValues.length,"价格区间"!==t.name){var a="".concat(t.name,":").concat(t.selectedValues.join(","));e.properties.push(a)}else e.priceRange=y(t.selectedValues)})),x(),u().setStorageSync("selectedCategoryId",_.value),u().setStorageSync("selectedOptions",v.value),u().preload({pageParams:e}),u().navigateBack();case 7:case"end":return t.stop()}}),_callee)})));return function applyFilters(){return e.apply(this,arguments)}}(),F=function getAllItemRect(){(0,o.queryRect)("panel-content",!0).then((function(e){e&&e.length>0&&v.value.forEach((function(t,a){t.height=e[a].height}))}))},k=function parsedData(){var e=JSON.parse(m.params.data||"");e.push({name:"价格区间",values:g}),v.value=e.map((function(e){return(0,n.default)((0,n.default)({},e),{},{selectedValues:[]})}))},j=function animateItems(){v.value.forEach((function(e,t){setTimeout((function(){e.transform="translateX(0)"}),100*t)}))};(0,c.useReady)((0,s.default)((0,l.default)().mark((function _callee2(){return(0,l.default)().wrap((function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:a=setTimeout((function(){j()}),200);case 1:case"end":return e.stop()}}),_callee2)})))),(0,r.onMounted)((function(){var e=u().getStorageSync("selectedCategoryId");_.value!==e?(k(),i=setTimeout((function(){F()}),500)):v.value=u().getStorageSync("selectedOptions")||[]}));(0,r.onUnmounted)((function(){clearTimeout(i),clearTimeout(a)}));var x=function onTrack(){p&&(p.track({event:d.ELinkflowEventsName.ProductDetail_Search}),v.value.length&&v.value.forEach((function(e){var t;e.selectedValues.length&&p.track({event:d.ELinkflowEventsName.ProductDetail_Subdivide_Search,props:{primaryCategory:e.name,secondaryCategory:e.selectedValues.join("|"),productSort:(null===(t=m.params)||void 0===t?void 0:t.title)||""}})})))},h={linkflow:p,router:m,categoryId:_,panelList:v,priceRanges:g,priceRangesArr:f,toggleOption:function toggleOption(e,t){var a=e.selectedValues;a.includes(t)?a.splice(a.indexOf(t),1):a.push(t)},getMinMaxPriceFromSelection:y,applyFilters:b,resetFilters:function resetFilters(){v.value.map((function(e){e.selectedValues=[]}))},getAllItemRect:F,parsedData:k,animateItems:j,get animaTimeout(){return a},set animaTimeout(e){a=e},get rectTimeout(){return i},set rectTimeout(e){i=e},toggleCollapse:function toggleCollapse(e){v.value[e].isCollapsed=!v.value[e].isCollapsed},onTrack:x};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}})},"./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/babel-loader/lib/index.js??clonedRuleSet-21.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/packageA/pages/advancedFilter/advancedFilter.vue?vue&type=template&id=0f4b7aa9&ts=true":function(e,t,a){a.d(t,{render:function(){return render}});var n=a("./node_modules/@nutui/nutui-taro/dist/packages/button/index.mjs"),l=(a("./node_modules/@nutui/nutui-taro/dist/packages/button/style.mjs"),a("./src/components/CustomBar/CustomBar.vue")),s=a("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=a("./node_modules/vue/index.js"),o=a("./src/static/icon/arrowLeft.png"),d=["onTap"],c=["onTap"],u=["src"];function render(e,t,i,p,m,_){var v=l.default,g=n.Button;return(0,r.openBlock)(),(0,r.createElementBlock)("view",{class:(0,r.normalizeClass)(["container",e.$style.container])},[(0,r.createVNode)(v,{title:"筛选",fixed:!0}),(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)(e.$style.collapse)},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(p.panelList,(function(t,n){return(0,r.openBlock)(),(0,r.createElementBlock)("block",{key:n},[(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)(e.$style["collapse-item"]),style:(0,r.normalizeStyle)({transform:t.transform})},[(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)([e.$style["collapse-item_title"],"nut-flex nut-row-between"])},[(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)([e.$style["title-name"],"f_s-16"])},(0,r.toDisplayString)(t.name)+"("+(0,r.toDisplayString)(t.selectedValues.length)+")",3),(0,r.createElementVNode)("image",{src:o,class:(0,r.normalizeClass)([e.$style["title-img"],(0,s.default)({},e.$style["title-img_up"],t.isCollapsed)]),onTap:function onTap(e){return p.toggleCollapse(n)}},null,42,d)],2),(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)([[e.$style["collapse-item_content"],t.isCollapsed?e.$style["content-none"]:"",(0,s.default)({},e.$style["numfnt-medium"],n===p.panelList.length-1)],"nut-flex nut-row-left"]),style:(0,r.normalizeStyle)({height:t.isCollapsed?0:t.height+"px"}),id:"panel-content"},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(t.values,(function(n){return(0,r.openBlock)(),(0,r.createElementBlock)("view",{key:n,class:(0,r.normalizeClass)([[e.$style["checkbox-warp"],(0,s.default)({},e.$style["checkbox-warp_select"],t.selectedValues.includes(n))],"f_s-12 f_w-400 nut-flex nut-row-left"]),onTap:function onTap(e){return p.toggleOption(t,n)}},[(0,r.createElementVNode)("image",{src:t.selectedValues.includes(n)?a("./src/static/icon/checkbox_on.png"):a("./src/static/icon/checkbox.png"),class:(0,r.normalizeClass)(e.$style["checkbox-img"])},null,10,u),(0,r.createElementVNode)("text",null,(0,r.toDisplayString)(n),1)],42,c)})),128))],6),(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)(e.$style["collapse-item_border"])},null,2)],6)])})),128)),(0,r.createCommentVNode)(" 占位 "),(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)(e.$style.placeholder)},null,2)],2),(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)([e.$style.end,"nut-flex nut-row-center f_s-14 f_w-400"])},[(0,r.createVNode)(g,{shape:"square",plain:"",type:"primary",class:(0,r.normalizeClass)([e.$style.btn,e.$style.btn_mg]),onClick:p.resetFilters},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("重置")]})),_:1},8,["class"]),(0,r.createVNode)(g,{shape:"square",plain:"",type:"primary",class:(0,r.normalizeClass)([e.$style.btn,e.$style.btn_mg]),onClick:p.applyFilters},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)("确定")]})),_:1},8,["class"])],2)],2)}},"./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/@tarojs/webpack5-runner/node_modules/css-loader/dist/cjs.js??clonedRuleSet-7.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-7.use[2]!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-7.use[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/packageA/pages/advancedFilter/advancedFilter.vue?vue&type=style&index=0&id=0f4b7aa9&lang=scss&module=true":function(e,t){t.default={container:"advancedFilter__container___tpFUB",collapse:"advancedFilter__collapse___KGq62","collapse-item":"advancedFilter__collapse-item___EZIJs","collapse-item_title":"advancedFilter__collapse-item_title___J4a56","collapse-item_content":"advancedFilter__collapse-item_content___qW9qQ","checkbox-img":"advancedFilter__checkbox-img___SaGuJ","checkbox-warp":"advancedFilter__checkbox-warp___reqfi","checkbox-warp_select":"advancedFilter__checkbox-warp_select___zKFrr","content-none":"advancedFilter__content-none___qvup7","numfnt-medium":"advancedFilter__numfnt-medium___tP533","collapse-item_border":"advancedFilter__collapse-item_border___UOuTT","title-name":"advancedFilter__title-name___OGcrr","title-img":"advancedFilter__title-img___r8jNI","title-img_up":"advancedFilter__title-img_up___YAsfA",end:"advancedFilter__end___a4Pty",btn:"advancedFilter__btn___Rc33z",btn_mg:"advancedFilter__btn_mg___moxc8",placeholder:"advancedFilter__placeholder___nhXGg","slide-bottom":"advancedFilter__slide-bottom___HCs29"}},"./src/packageA/pages/advancedFilter/advancedFilter.vue":function(e,t,a){var n=a("./node_modules/@tarojs/runtime/dist/runtime.esm.js"),l=a("./node_modules/@tarojs/taro-loader/lib/raw.js!./src/packageA/pages/advancedFilter/advancedFilter.vue");Page((0,n.createPageConfig)(l.default,"packageA/pages/advancedFilter/advancedFilter",{root:{cn:[]}},{}||{})),l.default},"./src/packageA/pages/advancedFilter/advancedFilter.vue?vue&type=script&setup=true&lang=ts":function(e,t,a){a.d(t,{default:function(){return n.default}});var n=a("./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/babel-loader/lib/index.js??clonedRuleSet-21.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/packageA/pages/advancedFilter/advancedFilter.vue?vue&type=script&setup=true&lang=ts")},"./src/packageA/pages/advancedFilter/advancedFilter.vue?vue&type=template&id=0f4b7aa9&ts=true":function(e,t,a){a.d(t,{render:function(){return n.render}});var n=a("./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/babel-loader/lib/index.js??clonedRuleSet-21.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/packageA/pages/advancedFilter/advancedFilter.vue?vue&type=template&id=0f4b7aa9&ts=true")},"./src/packageA/pages/advancedFilter/advancedFilter.vue?vue&type=style&index=0&id=0f4b7aa9&lang=scss&module=true":function(e,t,a){a.d(t,{default:function(){return n.default}});var n=a("./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/@tarojs/webpack5-runner/node_modules/css-loader/dist/cjs.js??clonedRuleSet-7.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-7.use[2]!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-7.use[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/packageA/pages/advancedFilter/advancedFilter.vue?vue&type=style&index=0&id=0f4b7aa9&lang=scss&module=true")}},function(e){e.O(0,["packageA/sub-vendors","taro","vendors","common"],(function(){return t="./src/packageA/pages/advancedFilter/advancedFilter.vue",e(e.s=t);var t}));e.O()}]);