"use strict";require("../../sub-vendors.js");/*! For license information please see inviteFriends.js.LICENSE.txt */
(wx.webpackJsonp=wx.webpackJsonp||[]).push([["packageA/pages/inviteFriends/inviteFriends"],{"./src/hook/savePoster.ts":function(e,s,t){t.d(s,{default:function(){return savePoster}});var n=t("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),o=t("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),r=t("./src/utils/index.ts"),a=t("./node_modules/@tarojs/taro/index.js"),i=t.n(a),u=t("./node_modules/vue/index.js");function savePoster(){var e=(0,u.ref)(""),s=(0,u.ref)(null),t="scope.writePhotosAlbum",a=function authConfirm(){i().showModal({content:"检测到您没打开保存图片权限，是否去设置打开？",confirmText:"确认",cancelText:"取消",success:function success(e){e.confirm?i().openSetting({success:function success(e){e.authSetting[t]?l():(0,r.Toast)("您没有授权，无法保存到相册")}}):(0,r.Toast)("您没有授权，无法保存到相册")}})},l=function(){var t=(0,o.default)((0,n.default)().mark((function _callee(){var t,o=arguments;return(0,n.default)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:t=o.length>0&&void 0!==o[0]?o[0]:s.value,i().saveImageToPhotosAlbum({filePath:e.value,success:function success(e){console.log("saveImg res=",e),(0,r.Toast)("保存成功~")},fail:function fail(s){console.log("saveImg err=",s),console.log("postImage.value",e.value),(0,r.Toast)("保存失败~")},complete:function complete(){i().vibrateShort(),t&&t()}});case 2:case"end":return n.stop()}}),_callee)})));return function saveImage(){return t.apply(this,arguments)}}();return{postImage:e,setVal:function setVal(s){return e.value=s},handleSavePoster:function handleSavePoster(){i().getSetting({success:function success(e){e.authSetting[t]?l():void 0===e.authSetting[t]?i().authorize({scope:t,success:function success(){l()},fail:function fail(){a()}}):a()}})},onSaveImageCallback:s}}},"./src/packageA/pages/inviteFriends/card.ts":function(e,s,t){t.d(s,{default:function(){return d}});var n=t("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=t("./node_modules/@babel/runtime/helpers/esm/createClass.js"),r=t("./node_modules/@tarojs/taro/index.js"),a=t.n(r),i=t("./src/scss/variables.ts"),u=a().getSystemInfoSync().screenWidth>375?1.5:2,l=function pxTransform(e){var s=(0,r.pxTransform)(e*u);return parseInt(s)},d=function(){function LastMayday(){(0,n.default)(this,LastMayday)}return(0,o.default)(LastMayday,[{key:"palette",value:function palette(e,s){return{width:l(375),height:l(698),backgroundColor:i.default.white,debug:!1,images:[{url:e,width:l(375),height:l(698),x:l(0),y:l(0)},{url:s,width:l(68),height:l(68),y:l(592),x:l(290)}]}}}]),LastMayday}()},"./node_modules/@tarojs/taro-loader/lib/raw.js!./src/packageA/pages/inviteFriends/inviteFriends.vue":function(e,s,t){var n=t("./src/packageA/pages/inviteFriends/inviteFriends.vue?vue&type=template&id=75a5f97a&ts=true"),o=t("./src/packageA/pages/inviteFriends/inviteFriends.vue?vue&type=script&setup=true&lang=ts"),r=t("./src/packageA/pages/inviteFriends/inviteFriends.vue?vue&type=style&index=0&id=75a5f97a&lang=scss&module=true"),a=t("./node_modules/vue-loader/dist/exportHelper.js");const i={};i.$style=r.default;const u=(0,a.default)(o.default,[["render",n.render],["__cssModules",i],["__file","src/packageA/pages/inviteFriends/inviteFriends.vue"]]);s.default=u},"./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/babel-loader/lib/index.js??clonedRuleSet-21.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/packageA/pages/inviteFriends/inviteFriends.vue?vue&type=script&setup=true&lang=ts":function(e,s,t){var n=t("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),o=t("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),r=t("./node_modules/vue/index.js"),a=t("./src/packageA/pages/inviteFriends/card.ts"),i=t("./src/components/CustomBar/CustomBar.vue"),u=t("./src/components/CustomBar/props.ts"),l=t("./src/components/CustomSwiper/CustomSwiper.vue"),d=t("./src/components/Loading/Loading.vue"),c=t("./src/components/PosterBuilder/utils/tools.ts"),p=t("./src/components/PosterBuilder/index.vue"),m=t("./src/stores/index.ts"),v=t("./src/hook/savePoster.ts");s.default=(0,r.defineComponent)({__name:"inviteFriends",setup:function setup(e,s){(0,s.expose)();var t=(0,v.default)(),g=t.setVal,f=t.handleSavePoster,_=t.onSaveImageCallback,b=(0,m.useInvitePostStore)(),j=(0,r.ref)(0),h=(0,r.ref)(!1),k=(0,r.ref)(!1),w=(0,r.reactive)({startDraw:!1,config:{width:750,height:1380}}),x=(0,r.computed)((function(){return b.qrCodeUrl})),y=(0,r.computed)((function(){return b.imgList})),F=(0,r.computed)((function(){return y.value[j.value].src}));(0,r.onMounted)((0,o.default)((0,n.default)().mark((function _callee(){return(0,n.default)().wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(x.value){e.next=3;break}return e.next=3,b.getQRCode();case 3:if(y.value.length){e.next=6;break}return e.next=6,b.getImgList();case 6:h.value=!0;case 7:case"end":return e.stop()}}),_callee)}))));var S={setVal:g,handleSavePoster:f,onSaveImageCallback:_,invitePostStore:b,swiperCurrent:j,isLoaded:h,isLoading:k,data:w,qrcodeUrl:x,imgList:y,selectImg:F,getPoster:function getPoster(){if(x.value&&F.value){k.value=!0;var e=(new a.default).palette(F.value,x.value);w.config=e,w.startDraw=!0}},swiperChange:function swiperChange(e){j.value=e},onImgOk:function onImgOk(e){w.startDraw=!1,g(e.tempFilePath),f(),_.value=function(){k.value=!1}},onImgError:function onImgError(e){console.error("onImgError error=",e)},CustomBar:i.default,get LogoColorType(){return u.LogoColorType},CustomSwiper:l.default,Loading:d.default,get toPx(){return c.toPx},PosterBuilder:p.default};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}})},"./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/babel-loader/lib/index.js??clonedRuleSet-21.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/packageA/pages/inviteFriends/inviteFriends.vue?vue&type=template&id=75a5f97a&ts=true":function(e,s,t){t.d(s,{render:function(){return render}});var n=t("./node_modules/@nutui/nutui-taro/dist/packages/button/index.mjs"),o=(t("./node_modules/@nutui/nutui-taro/dist/packages/button/style.mjs"),t("./node_modules/vue/index.js")),r={class:"container"},a=["src"],i=["src"];function render(e,s,t,u,l,d){var c=n.Button;return(0,o.openBlock)(),(0,o.createElementBlock)("view",r,[(0,o.createVNode)(u.CustomBar,{"logo-color":u.LogoColorType.BLACK,"bg-color":"transparent"},null,8,["logo-color"]),u.isLoaded?((0,o.openBlock)(),(0,o.createElementBlock)("view",{key:0,class:(0,o.normalizeClass)(e.$style.swiper_box)},[(0,o.createVNode)(u.CustomSwiper,{isAutoPlayHasV:!1,autoplay:!1,height:u.toPx(1388),current:u.swiperCurrent,isTransition:!1,imgMode:"aspectFill",bgColor:"#fff",videoName:"gDetail",list:u.imgList,onChange:u.swiperChange,"use-image-bg":!0,swiperItemSlot:!0,indicatorStyle:{bottom:0}},{default:(0,o.withCtx)((function(s){var t=s.data;return[(0,o.createElementVNode)("view",{class:(0,o.normalizeClass)(e.$style.swiper_content)},[(0,o.createElementVNode)("image",{mode:"aspectFill",src:t.src,class:(0,o.normalizeClass)(e.$style.image)},null,10,a),(0,o.createElementVNode)("image",{mode:"aspectFill",src:u.qrcodeUrl,class:(0,o.normalizeClass)(e.$style.imageQr)},null,10,i)],2)]})),_:1},8,["height","current","list"]),(0,o.createVNode)(c,{shape:"square",size:"large",type:"primary",loading:u.isLoading,class:(0,o.normalizeClass)(e.$style.btn),onClick:u.getPoster},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)("保存至手机")]})),_:1},8,["loading","class"])],2)):(0,o.createCommentVNode)("v-if",!0),(0,o.createVNode)(u.Loading,{show:!u.isLoaded},null,8,["show"]),u.data.startDraw?((0,o.openBlock)(),(0,o.createBlock)(u.PosterBuilder,{key:1,showLoading:!0,config:u.data.config,onSuccess:u.onImgOk,onFail:u.onImgError},null,8,["config"])):(0,o.createCommentVNode)("v-if",!0)])}},"./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/@tarojs/webpack5-runner/node_modules/css-loader/dist/cjs.js??clonedRuleSet-7.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-7.use[2]!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-7.use[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/packageA/pages/inviteFriends/inviteFriends.vue?vue&type=style&index=0&id=75a5f97a&lang=scss&module=true":function(e,s){s.default={swiper_box:"inviteFriends__swiper_box___iyQAx",swiper_content:"inviteFriends__swiper_content___r4IEe",image:"inviteFriends__image___59ONG",imageQr:"inviteFriends__imageQr___luR1F",btn:"inviteFriends__btn___TI3x1","slide-bottom":"inviteFriends__slide-bottom___Jejc2"}},"./src/packageA/pages/inviteFriends/inviteFriends.vue":function(e,s,t){var n=t("./node_modules/@tarojs/runtime/dist/runtime.esm.js"),o=t("./node_modules/@tarojs/taro-loader/lib/raw.js!./src/packageA/pages/inviteFriends/inviteFriends.vue");Page((0,n.createPageConfig)(o.default,"packageA/pages/inviteFriends/inviteFriends",{root:{cn:[]}},{}||{})),o.default},"./src/packageA/pages/inviteFriends/inviteFriends.vue?vue&type=script&setup=true&lang=ts":function(e,s,t){t.d(s,{default:function(){return n.default}});var n=t("./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/babel-loader/lib/index.js??clonedRuleSet-21.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/packageA/pages/inviteFriends/inviteFriends.vue?vue&type=script&setup=true&lang=ts")},"./src/packageA/pages/inviteFriends/inviteFriends.vue?vue&type=template&id=75a5f97a&ts=true":function(e,s,t){t.d(s,{render:function(){return n.render}});var n=t("./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/babel-loader/lib/index.js??clonedRuleSet-21.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/packageA/pages/inviteFriends/inviteFriends.vue?vue&type=template&id=75a5f97a&ts=true")},"./src/packageA/pages/inviteFriends/inviteFriends.vue?vue&type=style&index=0&id=75a5f97a&lang=scss&module=true":function(e,s,t){t.d(s,{default:function(){return n.default}});var n=t("./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-components!./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/@tarojs/webpack5-runner/node_modules/css-loader/dist/cjs.js??clonedRuleSet-7.use[1]!./node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-7.use[2]!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-7.use[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/packageA/pages/inviteFriends/inviteFriends.vue?vue&type=style&index=0&id=75a5f97a&lang=scss&module=true")}},function(e){e.O(0,["packageA/sub-vendors","taro","vendors","common"],(function(){return s="./src/packageA/pages/inviteFriends/inviteFriends.vue",e(e.s=s);var s}));e.O()}]);